(this["webpackJsonpklotski-solver"]=this["webpackJsonpklotski-solver"]||[]).push([[0],{12:function(e,t,n){e.exports=n(18)},17:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var o,r=n(0),s=n.n(r),a=n(10),l=n.n(a),i=n(3),c=n(4),u=n(1),d=n(7),h=n(6),b=n(11),v=n(2);function m(e){return e===o.Left?o.Right:e===o.Right?o.Left:e===o.Up?o.Down:o.Up}function p(e){for(var t=e.length,n=new Array(t),o=0;o<t;o++)n[t-o-1]=m(e[o]);return n}function f(e){return{rowPos:e.rowPos,colPos:e.colPos,numRows:e.numRows,numCols:e.numCols}}function w(e,t){var n,r=Object(v.a)(t);try{for(r.s();!(n=r.n()).done;){var s=n.value;s===o.Left?e.colPos--:s===o.Right?e.colPos++:s===o.Up?e.rowPos--:e.rowPos++}}catch(a){r.e(a)}finally{r.f()}}!function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Up=2]="Up",e[e.Down=3]="Down"}(o||(o={}));var k=function(){function e(t,n,o){Object(i.a)(this,e),this._cells=[[null,null,null,null],[null,null,null,null],[null,null,null,null],[null,null,null,null],[null,null,null,null]],this.blocks=void 0,this.winningCol=void 0,this.winningRow=void 0,this.winningRow=n,this.winningCol=o,this.blocks=t,this.insertBlocks()}return Object(c.a)(e,[{key:"insertBlocks",value:function(){var e,t=!1,n=Object(v.a)(this.blocks);try{for(n.s();!(e=n.n()).done;){var o=e.value;if(o.numRows*o.numCols!==4||t){if(o.numRows*o.numCols===4)throw new Error("There must be exacly one block of size 4")}else t=!0;for(var r=o.rowPos;r<o.rowPos+o.numRows;r++)for(var s=o.colPos;s<o.colPos+o.numCols;s++){if(null!==this._cells[r][s])throw new Error("Invalid block positioning");this._cells[r][s]=o}}}catch(a){n.e(a)}finally{n.f()}if(!t)throw new Error("There must be exactly one block of size 4")}},{key:"currentDirs",value:function(e){for(var t=new Array,n=!0,r=!0,s=!0,a=!0,l=e.rowPos;l<e.rowPos+e.numRows;l++){var i=e.colPos;n&&(i<1||null!==this._cells[l][i-1])&&(n=!1),i=e.colPos+e.numCols-1,r&&(i>2||null!==this._cells[l][i+1])&&(r=!1)}for(var c=e.colPos;c<e.colPos+e.numCols;c++){var u=e.rowPos;s&&(u<1||null!==this._cells[u-1][c])&&(s=!1),u=e.rowPos+e.numRows-1,a&&(u>3||null!==this._cells[u+1][c])&&(a=!1)}return n&&t.push(o.Left),r&&t.push(o.Right),s&&t.push(o.Up),a&&t.push(o.Down),t}},{key:"makeMove",value:function(e,t){var n,r=e.numRows,s=e.numCols,a=Object(v.a)(t);try{for(a.s();!(n=a.n()).done;){var l=n.value,i=e.rowPos,c=e.colPos;if(w(e,[l]),l===o.Left||l===o.Up)for(var u=i;u<i+r;u++)for(var d=c;d<c+s;d++)l===o.Left?this._cells[u][d-1]=e:this._cells[u-1][d]=e,this._cells[u][d]=null;else for(var h=i+r-1;h>=i;h--)for(var b=c+s-1;b>=c;b--)l===o.Right?this._cells[h][b+1]=e:this._cells[h+1][b]=e,this._cells[h][b]=null}}catch(m){a.e(m)}finally{a.f()}}},{key:"findMoves",value:function(e){var t,n=new Array,o=new Array,r=Object(v.a)(this.currentDirs(e));try{for(r.s();!(t=r.n()).done;){var s=t.value;o.push([s])}}catch(d){r.e(d)}finally{r.f()}for(;o.length>0;){var a=o.pop();if(void 0!==a){if(n.push(a),this.makeMove(e,a),a.length<2){var l,i=Object(v.a)(this.currentDirs(e));try{for(i.s();!(l=i.n()).done;){var c=l.value;if(c!==m(a[a.length-1])){var u=Object(b.a)(a);u.push(c),o.push(u)}}}catch(d){i.e(d)}finally{i.f()}}this.makeMove(e,p(a))}}return n}},{key:"getMoves",value:function(){var e,t=new Array,n=Object(v.a)(this.blocks);try{for(n.s();!(e=n.n()).done;){var o,r=e.value,s=Object(v.a)(this.findMoves(r));try{for(s.s();!(o=s.n()).done;){var a=o.value,l=f(r);t.push({block:l,dirs:a})}}catch(i){s.e(i)}finally{s.f()}}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"getHash",value:function(){for(var e="",t=0,n=0;n<5;n++)for(var o=0;o<4;o++){var r=this._cells[n][o];null===r?(e+="0",t++):r.numRows*r.numCols===2?e+=1===r.numRows?"2H":"2V":e+=(r.numRows*r.numCols).toString()}if(2!==t)throw new Error("There must be exactly 2 free spaces on the board");return e}},{key:"isSolved",value:function(){var e=this._cells[this.winningRow][this.winningCol];return null!==e&&(e.rowPos===this.winningRow&&e.colPos===this.winningCol&&e.numRows*e.numCols===4)}}]),e}();function g(e,t){var n,o,r,s=new Array,a=Object(v.a)(e.blocks);try{for(a.s();!(n=a.n()).done;){var l=f(n.value);o=l,r=t.block,o.rowPos===r.rowPos&&o.colPos===r.colPos&&o.numRows===r.numRows&&o.numCols===r.numCols&&w(l,t.dirs),s.push(l)}}catch(i){a.e(i)}finally{a.f()}return new k(s,e.winningRow,e.winningCol)}var y=function(){function e(t,n){Object(i.a)(this,e),this.board=void 0,this.parent=void 0,this.headDist=0,this.board=t,this.parent=n,null!==this.parent&&(this.headDist=this.parent.headDist+1)}return Object(c.a)(e,[{key:"getChildren",value:function(t){var n,o=new Array,r=Object(v.a)(this.board.getMoves());try{for(r.s();!(n=r.n()).done;){var s=n.value,a=g(this.board,s),l=a.getHash();if(!t.has(l)){t.add(l);var i=new e(a,this);o.push(i)}}}catch(c){r.e(c)}finally{r.f()}return o}}]),e}(),C=function(){function e(t,n,o){Object(i.a)(this,e),this.head=void 0,this.tail=null,this.head=new y(new k(t,n,o),null)}return Object(c.a)(e,[{key:"solve",value:function(){var e=new Set,t=new Array;for(t.push(this.head),e.add(this.head.board.getHash());t.length>0;){var n=t.shift();if(void 0!==n){if(n.board.isSolved())return void(this.tail=n);var o,r=Object(v.a)(n.getChildren(e));try{for(r.s();!(o=r.n()).done;){var s=o.value;t.push(s)}}catch(a){r.e(a)}finally{r.f()}}}}},{key:"getBoards",value:function(){if(null===this.tail)return[];for(var e=new Array(this.tail.headDist),t=this.tail;null!==t;)e[t.headDist-1]=t.board.blocks,t=t.parent;return e}}]),e}();n(17);function P(e){var t=s.a.createElement("div",{className:"col-6 fourblock m-0 bg-danger border border-dark rounded"}),n=s.a.createElement("div",{className:"col-3 twoblockV m-0 bg-primary border border-dark rounded"}),o=s.a.createElement("div",{className:"col-6 twoblockH m-0 bg-warning border border-dark rounded"}),r=s.a.createElement("div",{className:"col-3 oneblock m-0 bg-success border border-dark rounded"});return 4===e.size?t:2===e.size&&1===e.block.numCols?n:2===e.size?o:1===e.size?r:void alert("Invalid board cell properties")}var R=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).click=o.click.bind(Object(u.a)(o)),o}return Object(c.a)(n,[{key:"click",value:function(e){this.props.onClickFunc(e.currentTarget.id)}},{key:"render",value:function(){if(null==this.props.block)return s.a.createElement("span",null);var e=s.a.createElement("div",{className:"col-3 p-0 m-0"});if(!this.props.block.hasOwnProperty("colPos"))return e;var t=parseInt(this.props.id.split(",")[0]),n=parseInt(this.props.id.split(",")[1]),o=this.props.block.numRows*this.props.block.numCols;if(0===o){var r=this.props.winningRow,a=this.props.winningCol,l=s.a.createElement("div",{className:"col-3 boardcell winningcell p-0 m-0 border",id:this.props.id,onMouseUp:this.props.onDropFunc}),i=s.a.createElement("div",{className:"col-3 boardcell winningcell p-0 m-0 border",id:this.props.id,onMouseUp:this.props.onDropFunc,onMouseDown:this.click}),c=s.a.createElement("div",{className:"col-3 boardcell p-0 m-0 border",id:this.props.id,onMouseUp:this.props.onDropFunc}),u=s.a.createElement("div",{className:"col-3 boardcell p-0 m-0 border",id:this.props.id,onMouseUp:this.props.onDropFunc,onMouseDown:this.click});return t!==r&&t!==r+1||n!==a&&n!==a+1?4===t||3===n?c:u:4===t||3===n?l:i}return s.a.createElement(P,{key:this.props.id,size:o,block:this.props.block})}}]),n}(s.a.Component);function E(e){var t=e.cells.map((function(t){return s.a.createElement(R,{key:t.id,id:t.id,block:t.val,onClickFunc:e.onClickFunc,onDropFunc:e.onDropFunc,winningRow:e.winningRow,winningCol:e.winningCol})}));return s.a.createElement("div",{className:"row boardrow p-0 m-0"},t)}var j=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).state={blocks:o.props.blocks,blocksAdded:!1},o.onDrop=o.onDrop.bind(Object(u.a)(o)),o}return Object(c.a)(n,[{key:"onDrop",value:function(e){if(this.props.dragBlock){var t={rowPos:parseInt(e.currentTarget.id.split(",")[0]),colPos:parseInt(e.currentTarget.id.split(",")[1]),numRows:this.props.dragBlock.numRows,numCols:this.props.dragBlock.numCols},n=t.rowPos+t.numRows-1,o=t.colPos+t.numCols-1;if(t.numRows*t.numCols===4&&t.rowPos===this.props.winningRow&&t.colPos===this.props.winningCol)alert("The block of size 4 cannot be placed in the winning position");else if(n>4||o>3)alert("Invalid block placement");else{var r=this.state.blocks;r.push(t),this.setState((function(e){return{blocksAdded:!0,blocks:r}})),this.props.onAddBlock(this.state.blocks)}}}},{key:"getBlocks",value:function(e){e!==this.state.blocks&&this.setState((function(t){return{blocks:e}}));for(var t={numRows:0,numCols:0},n=new Array(5),o=0;o<5;o++){for(var r={id:o,row:new Array(4)},s=0;s<4;s++){var a={id:o.toString()+","+s.toString(),val:{numRows:0,numCols:0,rowPos:o,colPos:s}};r.row[s]=a}n[o]=r}for(var l=0;l<e.length;l++)for(var i=e[l],c=i.rowPos+i.numRows-1,u=i.colPos+i.numCols-1,d=i.rowPos;d<=c;d++)for(var h=i.colPos;h<=u;h++)d===i.rowPos&&h===i.colPos?n[d].row[h].val=i:d===i.rowPos?n[d].row[h].val=null:n[d].row[h].val=t;return n}},{key:"render",value:function(){var e=this,t=this.getBlocks(this.props.blocks).map((function(t){return s.a.createElement(E,{key:t.id,cells:t.row,onClickFunc:e.props.onClickFunc,onDropFunc:e.onDrop,winningRow:e.props.winningRow,winningCol:e.props.winningCol})}));return s.a.createElement("div",{className:"p-0 mt-4 border",id:"board"},t)}}]),n}(s.a.Component),O=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).state={rel:null,pos:{left:0,top:0}},o.drag=o.drag.bind(Object(u.a)(o)),o.move=o.move.bind(Object(u.a)(o)),o.drop=o.drop.bind(Object(u.a)(o)),o}return Object(c.a)(n,[{key:"drag",value:function(e){if(0===e.button){var t=e.currentTarget.getBoundingClientRect();this.setState((function(e){return{rel:{left:t.left,top:t.top}}})),document.addEventListener("mousemove",this.move),document.addEventListener("mouseup",this.drop),this.props.onDragFunc(e.currentTarget.id),e.stopPropagation(),e.preventDefault()}}},{key:"move",value:function(e){var t=this,n=e.pageX,o=e.pageY;this.setState((function(e){return{pos:{left:n-t.state.rel.left,top:o-t.state.rel.top}}})),e.stopPropagation(),e.preventDefault()}},{key:"drop",value:function(e){this.setState((function(e){return{rel:null,pos:{left:0,top:0}}})),document.removeEventListener("mousemove",this.move),document.removeEventListener("mouseup",this.drop),e.stopPropagation(),e.preventDefault()}},{key:"render",value:function(){var e={position:"relative",left:this.state.pos.left+"px",top:this.state.pos.top+"px"},t="";return 4===this.props.size?t="draggable-fourblock m-0 bg-danger border border-dark rounded draggable":2===this.props.size&&1===this.props.block.numCols?t="draggable-twoblockV m-0 bg-primary border border-dark rounded draggable":2===this.props.size?t="draggable-twoblockH m-0 bg-warning border border-dark rounded draggable":1===this.props.size?t="draggable-oneblock m-0 bg-success border border-dark rounded draggable":alert("Invalid draggable block properties"),s.a.createElement("div",{className:t,id:this.props.id,style:e,onMouseDown:this.drag})}}]),n}(s.a.Component);function D(e){return e.show?s.a.createElement("div",{className:"col-10 col-xl-4 mt-5"},s.a.createElement("div",{className:"row justify-content-center"},s.a.createElement(O,{size:4,id:"2,2",onDragFunc:e.onDragFunc}),s.a.createElement("div",{className:"mx-2"}),s.a.createElement(O,{size:2,id:"2,1",block:{numRows:2,numCols:1},onDragFunc:e.onDragFunc})),s.a.createElement("div",{className:"row justify-content-center mt-3"},s.a.createElement(O,{size:1,id:"1,1",onDragFunc:e.onDragFunc}),s.a.createElement("div",{className:"mx-2"}),s.a.createElement(O,{size:2,id:"1,2",block:{numRows:1,numCols:2},onDragFunc:e.onDragFunc}))):s.a.createElement("span",null)}function x(e){var t=s.a.createElement("button",{className:"btn btn-danger mr-2",onClick:e.onClear},"Clear"),n=s.a.createElement("button",{className:"btn btn-danger mr-2",onClick:e.onDoubleClear},"Clear"),o=s.a.createElement("button",{className:"btn btn-warning mx-1",onClick:e.onDefault},"Default"),r=s.a.createElement("button",{className:"btn btn-success ml-2",onClick:e.onFinish},"Finish"),a=s.a.createElement("button",{className:"btn btn-warning mx-2",onClick:e.onNext},"Next"),l=s.a.createElement("button",{className:"btn btn-danger mr-2",onClick:e.onPrev,id:"prev-btn"},"Prev"),i=s.a.createElement("button",{className:"btn btn-primary ml-2",onClick:e.onSolve},"Solve!");return e.finished?s.a.createElement("span",null):e.solved?s.a.createElement("div",{className:"text-center mt-3"},l,a,r):e.blocksAdded?s.a.createElement("div",{className:"text-center mt-3"},n,i):e.cleared?s.a.createElement("div",{className:"text-center mt-3"},o,i):s.a.createElement("div",{className:"text-center mt-3"},t,i)}var N=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).state={blocks:[],blocksAdded:!1,cleared:!0,default:!1,displayText:"Klotski Solver",dragBlock:null,finished:!1,solved:!1,winningRow:3,winningCol:1},o.blocksAdded=o.blocksAdded.bind(Object(u.a)(o)),o.clear=o.clear.bind(Object(u.a)(o)),o.clearDragBlock=o.clearDragBlock.bind(Object(u.a)(o)),o.default=o.default.bind(Object(u.a)(o)),o.doubleClear=o.doubleClear.bind(Object(u.a)(o)),o.dragBlockInfo=o.dragBlockInfo.bind(Object(u.a)(o)),o.finish=o.finish.bind(Object(u.a)(o)),o.next=o.next.bind(Object(u.a)(o)),o.prev=o.prev.bind(Object(u.a)(o)),o.restart=o.restart.bind(Object(u.a)(o)),o.setWinningPos=o.setWinningPos.bind(Object(u.a)(o)),o.solve=o.solve.bind(Object(u.a)(o)),o}return Object(c.a)(n,[{key:"blocksAdded",value:function(e){this.setState((function(t){return{blocks:e,blocksAdded:!0,cleared:!1}}))}},{key:"clear",value:function(){this.setState((function(e){return{blocks:[],blocksAdded:!1,cleared:!0,default:!1,displayText:"Klotski Solver",solved:!1,finished:!1,dragBlock:null,winningRow:3,winningCol:1}}))}},{key:"doubleClear",value:function(){this.clear()}},{key:"restart",value:function(){var e=this.clear;setTimeout((function(){e()}),3e3)}},{key:"solve",value:function(){try{var e=new C(this.state.blocks,this.state.winningRow,this.state.winningCol);e.solve();var t=e.getBoards(),n=t.length;0===n?(this.setState((function(e){return{displayText:"No Solution Found :("}})),this.restart()):this.setState((function(e){return{blocksAdded:!1,default:!1,displayText:"Solution of Length "+n.toString()+" Found!",boards:t,boardIdx:-1,solved:!0}}))}catch(o){alert(o)}}},{key:"next",value:function(){var e=this;0!==this.state.boards.length&&(this.state.boardIdx===this.state.boards.length-1?(this.setState((function(e){return{solved:!1,finished:!0,displayText:"You Win!"}})),this.restart()):this.setState((function(t){return{blocks:e.state.boards[e.state.boardIdx+1],boardIdx:e.state.boardIdx+1,displayText:"Move "+(e.state.boardIdx+2).toString()}})))}},{key:"prev",value:function(){var e=this;0!==this.state.boards.length&&-1!==this.state.boardIdx&&this.setState((function(t){return{blocks:e.state.boards[e.state.boardIdx-1],boardIdx:e.state.boardIdx-1,displayText:e.state.boardIdx<=0?"Klotski Solver":"Move "+e.state.boardIdx.toString()}}))}},{key:"finish",value:function(){this.setState((function(e){return{solved:!1,finished:!0}}));var e=this.state.boardIdx,t=this.state.boards.length,n=this.next,o=setInterval((function(){e<t?(n(),e++):clearInterval(o)}),250)}},{key:"default",value:function(){var e=[{rowPos:0,colPos:0,numRows:2,numCols:1},{rowPos:0,colPos:1,numRows:2,numCols:2},{rowPos:0,colPos:3,numRows:2,numCols:1},{rowPos:2,colPos:0,numRows:2,numCols:1},{rowPos:2,colPos:1,numRows:1,numCols:2},{rowPos:2,colPos:3,numRows:2,numCols:1},{rowPos:3,colPos:1,numRows:1,numCols:1},{rowPos:3,colPos:2,numRows:1,numCols:1},{rowPos:4,colPos:0,numRows:1,numCols:1},{rowPos:4,colPos:3,numRows:1,numCols:1}];this.setState((function(t){return{blocks:e,blocksAdded:!1,cleared:!1,default:!0,winningRow:3,winningCol:1}}))}},{key:"dragBlockInfo",value:function(e){this.setState((function(t){return{dragBlock:{numRows:parseInt(e.split(",")[0]),numCols:parseInt(e.split(",")[1])}}}))}},{key:"setWinningPos",value:function(e){this.state.cleared&&this.setState((function(t){return{winningRow:parseInt(e.split(",")[0]),winningCol:parseInt(e.split(",")[1])}}))}},{key:"clearDragBlock",value:function(e){this.setState((function(e){return{dragBlock:null}}))}},{key:"render",value:function(){return s.a.createElement("div",{id:"content-wrapper"},s.a.createElement("div",{className:"h1 text-center mt-1 mb-0",id:"header"},this.state.displayText),s.a.createElement("div",{className:"row justify-content-center px-0 mx-0",onMouseDown:this.clearDragBlock},s.a.createElement("div",{className:"col-4 board"},s.a.createElement(j,{blocks:this.state.blocks,dragBlock:this.state.dragBlock,onAddBlock:this.blocksAdded,onClickFunc:this.setWinningPos,winningRow:this.state.winningRow,winningCol:this.state.winningCol}),s.a.createElement(x,{blocksAdded:this.state.blocksAdded,cleared:this.state.cleared,finished:this.state.finished,solved:this.state.solved,onClear:this.clear,onDefault:this.default,onDoubleClear:this.doubleClear,onFinish:this.finish,onNext:this.next,onPrev:this.prev,onSolve:this.solve})),s.a.createElement(D,{show:this.state.cleared||this.state.blocksAdded,onDragFunc:this.dragBlockInfo})),s.a.createElement("div",{className:"text-center text-secondary",id:"footer"},"Developed by Sam Royall"))}}]),n}(s.a.Component);var S=function(){return s.a.createElement(N,null)};l.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(S,null)),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.61d6d984.chunk.js.map