(this["webpackJsonpklotski-solver"]=this["webpackJsonpklotski-solver"]||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n(22)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(8),l=n.n(a),s=(n(14),function(){return r.a.createElement("div",{id:"overlay"},r.a.createElement("div",{className:"alert alert-danger alert-dismissible fade show alert-body",role:"alert"},r.a.createElement("button",{type:"button",className:"close alert-button","data-dismiss":"alert","aria-label":"close",onClick:function(){return document.getElementById("overlay").classList.add("hide")}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7")),r.a.createElement("div",{className:"h4"},"Welcome to the Klotski Solver!"),r.a.createElement("hr",null),"The goal of Klotski is to create a board with ",r.a.createElement("strong",null,"one")," red block and",r.a.createElement("strong",null," two")," empty spaces and attempt to move the red block to the winning position (the pink spaces) in as few moves as possible.",r.a.createElement("hr",null),"First, click on the board to set your winning position.",r.a.createElement("br",null),r.a.createElement("br",null),"Next, drag-and-drop (desktop only) or click-to-select and click-to-place blocks on the board.",r.a.createElement("br",null),r.a.createElement("br",null),"Finally, click 'Solve' and watch our super cool algorithm find an optimal solution to your board. Step though the solution by pressing 'Next' or 'Prev', or simply press 'Finish' and watch as the board is solved before your eyes."))}),i=n(3),c=n(4),u=n(1),d=n(6),m=n(5);n(15);function b(e,t,n){var o="",r=e.numRows*e.numCols;if(1===r)o+="col-3 boardblock p-0 m-0 bg-success border border-dark rounded";else if(2===r&&1===e.numCols)o+="col-3 boardblock p-0 m-0 bg-primary border border-dark",o+=t===e.rowPos?" border-bottom-0 rounded-top":" border-top-0 rounded-bottom";else if(2===r)o+="col-3 boardblock p-0 m-0 bg-warning border border-dark",o+=n===e.colPos?" border-right-0 rounded-left":" border-left-0 rounded-right";else{if(4!==r)return void alert("Invalid board block properties");o+="col-3 boardblock p-0 m-0 bg-danger border border-dark",o+=t===e.rowPos?" border-bottom-0 rounded-top":" border-top-0 rounded-bottom",o+=n===e.colPos?"-left border-right-0":"-right border-left-0"}return o}var h=function(e){return r.a.createElement("div",{className:b(e.block,e.currRow,e.currCol),id:e.id,onMouseUp:e.onDropFunc,onMouseDown:e.onClickFunc})};n(16);var f=function(e){return e.block.numRows*e.block.numCols===0?function(e){var t=parseInt(e.id.split(",")[0]),n=parseInt(e.id.split(",")[1]),o=t!==e.winningRow&&t!==e.winningRow+1||n!==e.winningCol&&n!==e.winningCol+1?"col-3 boardcell p-0 m-0 border":"col-3 boardcell winningcell p-0 m-0 border";return r.a.createElement("div",{className:o,id:e.id,onMouseUp:e.onDropFunc,onMouseDown:function(t){return e.onClickFunc(t)}})}(e):function(e){return r.a.createElement(h,{key:e.id,id:e.id,block:e.block,currRow:parseInt(e.id.split(",")[0]),currCol:parseInt(e.id.split(",")[1]),size:e.block.numRows*e.block.numCols,onDropFunc:e.onDropFunc,onClickFunc:function(t){return e.onClickFunc(t)}})}(e)},v=(n(17),function(e){return r.a.createElement("div",{className:"row boardrow p-0 m-0"},e.cells.map((function(t){return r.a.createElement(f,{key:t.id,id:t.id,block:t.val,onClickFunc:e.onClickFunc,onDropFunc:e.onDropFunc,winningRow:e.winningRow,winningCol:e.winningCol})})))});n(18);function w(e,t){if(e.dragBlock){var n=parseInt(t.currentTarget.id.split(",")[0]),o=parseInt(t.currentTarget.id.split(",")[1]),r=n+e.dragBlock.numRows-1,a=o+e.dragBlock.numCols-1;if(r<5&&a<4){var l={rowPos:n,colPos:o,numRows:e.dragBlock.numRows,numCols:e.dragBlock.numCols},s=l.numRows*l.numCols,i=l.rowPos===e.winningRow&&l.colPos===e.winningCol;4===s&&i||function(e,t,n){for(var o=[],r=e.rowPos,a=e.rowPos+e.numRows-1,l=e.colPos,s=e.colPos+e.numCols-1,i=0;i<t.length;i++){var c=t[i],u=c.rowPos,d=c.rowPos+c.numRows-1,m=c.colPos,b=c.colPos+c.numCols-1;u>=r&&u<=a&&b>=l&&b<=s||u>=r&&u<=a&&m>=l&&m<=s||r>=u&&r<=d&&l>=m&&l<=b||r>=u&&r<=d&&s>=m&&s<=b||o.push(c)}o.push(e),n(o)}(l,e.blocks,e.onAddBlock)}}}var p=function(e){return r.a.createElement("div",{className:"p-0 mt-4 border",id:"board"},function(e,t){return t.map((function(t){return r.a.createElement(v,{key:t.id,cells:t.row,onClickFunc:e.dragBlock?function(t){return w(e,t)}:e.onWinPosChange,onDropFunc:function(t){return w(e,t)},winningRow:e.winningRow,winningCol:e.winningCol})}))}(e,function(e){for(var t=new Array(5),n=0;n<5;n++){for(var o={id:n,row:new Array(4)},r=0;r<4;r++){var a={id:n.toString()+","+r.toString(),val:{numRows:0,numCols:0,rowPos:n,colPos:r}};o.row[r]=a}t[n]=o}for(var l=0;l<e.length;l++)for(var s=e[l],i=s.colPos+s.numCols-1,c=s.rowPos+s.numRows-1,u=s.rowPos;u<=c;u++)for(var d=s.colPos;d<=i;d++)t[u].row[d].val=s;return t}(e.blocks)))},g=function(e){return r.a.createElement("button",{className:"btn btn-sm btn-primary ml-2",onClick:e},"Solve!")};var k,y=function(e){return"solved"===e.state?r.a.createElement("div",{className:"text-center mt-2"},(t=e.onPrev,r.a.createElement("button",{className:"btn btn-sm btn-danger mr-2",onClick:t,id:"prev-btn"},"Prev")),function(e){return r.a.createElement("button",{className:"btn btn-sm btn-warning mx-2",onClick:e},"Next")}(e.onNext),function(e){return r.a.createElement("button",{className:"btn btn-sm btn-success ml-2",onClick:e},"Finish")}(e.onFinish)):"cleared"===e.state?r.a.createElement("div",{className:"text-center mt-2"},function(e){return r.a.createElement("button",{className:"btn btn-sm btn-warning mx-1",onClick:e},"Default")}(e.onDefault),g(e.onSolve)):"default"===e.state||"blocksAdded"===e.state?r.a.createElement("div",{className:"text-center mt-2"},function(e){return r.a.createElement("button",{className:"btn btn-sm btn-danger mr-2",onClick:e},"Clear")}(e.onClear),g(e.onSolve)):r.a.createElement(r.a.Fragment,null);var t},C=(n(19),function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).state={rel:null,pos:{left:0,top:0}},o.click=o.click.bind(Object(u.a)(o)),o.move=o.move.bind(Object(u.a)(o)),o.drop=o.drop.bind(Object(u.a)(o)),o}return Object(c.a)(n,[{key:"click",value:function(e){if(0===e.button){var t=e.currentTarget.getBoundingClientRect();this.setState((function(){return{rel:{left:t.left,top:t.top}}})),document.addEventListener("mousemove",this.move),document.addEventListener("mouseup",this.drop),this.props.onDragFunc(e.currentTarget.id),e.stopPropagation(),e.preventDefault()}}},{key:"move",value:function(e){var t=e.pageX,n=e.pageY;this.setState((function(e){return{pos:{left:t-e.rel.left,top:n-e.rel.top}}})),e.stopPropagation(),e.preventDefault()}},{key:"drop",value:function(e){this.setState((function(){return{rel:null,pos:{left:0,top:0}}})),document.removeEventListener("mousemove",this.move),document.removeEventListener("mouseup",this.drop),e.stopPropagation(),e.preventDefault()}},{key:"render",value:function(){var e={position:"relative",left:this.state.pos.left+"px",top:this.state.pos.top+"px"},t="";return 4===this.props.size?t="draggable-fourblock draggable m-2 p-0 bg-danger  border border-dark rounded":2===this.props.size&&1===this.props.block.numCols?t="draggable-twoblockV draggable m-2 p-0 bg-primary border border-dark rounded":2===this.props.size?t="draggable-twoblockH draggable m-2 p-0 bg-warning border border-dark rounded":1===this.props.size?t="draggable-oneblock  draggable m-2 p-0 bg-success border border-dark rounded":alert("Invalid draggable block properties"),r.a.createElement("div",{className:t,id:this.props.id,style:e,onMouseDown:this.click})}}]),n}(r.a.Component)),P=function(e){return r.a.createElement("div",{className:"col-12 mt-2"},r.a.createElement("div",{className:"row justify-content-center"},function(e){return r.a.createElement(C,{size:4,id:"2,2",onDragFunc:e})}(e),function(e){return r.a.createElement(C,{size:2,id:"2,1",onDragFunc:e,block:{numRows:2,numCols:1}})}(e),function(e){return r.a.createElement(C,{size:2,id:"1,2",onDragFunc:e,block:{numRows:1,numCols:2}})}(e),function(e){return r.a.createElement(C,{size:1,id:"1,1",onDragFunc:e})}(e)))},R=function(e){return e.show?P(e.onDragFunc):r.a.createElement(r.a.Fragment,null)},E=n(2);function S(e){return e===k.Left?k.Right:e===k.Right?k.Left:e===k.Up?k.Down:k.Up}function x(e){for(var t=e.length,n=new Array(t),o=0;o<t;o++)n[t-o-1]=S(e[o]);return n}function j(e){return{rowPos:e.rowPos,colPos:e.colPos,numRows:e.numRows,numCols:e.numCols}}function O(e,t){var n,o=Object(E.a)(t);try{for(o.s();!(n=o.n()).done;){var r=n.value;r===k.Left?e.colPos--:r===k.Right?e.colPos++:r===k.Up?e.rowPos--:e.rowPos++}}catch(a){o.e(a)}finally{o.f()}}!function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Up=2]="Up",e[e.Down=3]="Down"}(k||(k={}));var D=function(){function e(t,n,o){Object(i.a)(this,e),this._cells=[[null,null,null,null],[null,null,null,null],[null,null,null,null],[null,null,null,null],[null,null,null,null]],this.blocks=void 0,this.winningCol=void 0,this.winningRow=void 0,this.winningRow=n,this.winningCol=o,this.blocks=t,this.insertBlocks()}return Object(c.a)(e,[{key:"insertBlocks",value:function(){var e,t=!1,n=0,o=Object(E.a)(this.blocks);try{for(o.s();!(e=o.n()).done;){var r=e.value;if(r.numRows*r.numCols!==4||t){if(r.numRows*r.numCols===4)throw new Error("There must be exacly one block of size 4")}else t=!0;for(var a=r.rowPos;a<r.rowPos+r.numRows;a++)for(var l=r.colPos;l<r.colPos+r.numCols;l++){if(null!==this._cells[a][l])throw new Error("Invalid block positioning");this._cells[a][l]=r,n++}}}catch(s){o.e(s)}finally{o.f()}if(18!==n)throw new Error("There must be exactly two free spaces");if(!t)throw new Error("There must be exactly one block of size 4")}},{key:"currentDirs",value:function(e){for(var t=new Array,n=!0,o=!0,r=!0,a=!0,l=e.rowPos;l<e.rowPos+e.numRows;l++){var s=e.colPos;n&&(s<1||null!==this._cells[l][s-1])&&(n=!1),s=e.colPos+e.numCols-1,o&&(s>2||null!==this._cells[l][s+1])&&(o=!1)}for(var i=e.colPos;i<e.colPos+e.numCols;i++){var c=e.rowPos;r&&(c<1||null!==this._cells[c-1][i])&&(r=!1),c=e.rowPos+e.numRows-1,a&&(c>3||null!==this._cells[c+1][i])&&(a=!1)}return n&&t.push(k.Left),o&&t.push(k.Right),r&&t.push(k.Up),a&&t.push(k.Down),t}},{key:"makeMove",value:function(e,t){var n,o=e.numRows,r=e.numCols,a=Object(E.a)(t);try{for(a.s();!(n=a.n()).done;){var l=n.value,s=e.rowPos,i=e.colPos;if(O(e,[l]),l===k.Left||l===k.Up)for(var c=s;c<s+o;c++)for(var u=i;u<i+r;u++)l===k.Left?this._cells[c][u-1]=e:this._cells[c-1][u]=e,this._cells[c][u]=null;else for(var d=s+o-1;d>=s;d--)for(var m=i+r-1;m>=i;m--)l===k.Right?this._cells[d][m+1]=e:this._cells[d+1][m]=e,this._cells[d][m]=null}}catch(b){a.e(b)}finally{a.f()}}},{key:"findMoves",value:function(e){var t,n=new Array,o=Object(E.a)(this.currentDirs(e));try{for(o.s();!(t=o.n()).done;){var r=t.value;n.push([r]),this.makeMove(e,[r]);var a,l=Object(E.a)(this.currentDirs(e));try{for(l.s();!(a=l.n()).done;){var s=a.value;if(s!==S(r)){var i=[r,s];n.push(i)}}}catch(c){l.e(c)}finally{l.f()}this.makeMove(e,x([r]))}}catch(c){o.e(c)}finally{o.f()}return n}},{key:"getMoves",value:function(){var e,t=new Array,n=Object(E.a)(this.blocks);try{for(n.s();!(e=n.n()).done;){var o,r=e.value,a=Object(E.a)(this.findMoves(r));try{for(a.s();!(o=a.n()).done;){var l=o.value,s=j(r);t.push({block:s,dirs:l})}}catch(i){a.e(i)}finally{a.f()}}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"getHash",value:function(){for(var e="",t=0;t<5;t++)for(var n=0;n<4;n++){var o=this._cells[t][n];null===o?e+="0":o.numRows*o.numCols===2?e+=1===o.numRows?"2H":"2V":e+=(o.numRows*o.numCols).toString()}return e}},{key:"isSolved",value:function(){var e=this._cells[this.winningRow][this.winningCol];return null!==e&&(e.rowPos===this.winningRow&&e.colPos===this.winningCol&&e.numRows*e.numCols===4)}}]),e}();function I(e,t){var n,o,r,a=new Array,l=Object(E.a)(e.blocks);try{for(l.s();!(n=l.n()).done;){var s=j(n.value);o=s,r=t.block,o.rowPos===r.rowPos&&o.colPos===r.colPos&&o.numRows===r.numRows&&o.numCols===r.numCols&&O(s,t.dirs),a.push(s)}}catch(i){l.e(i)}finally{l.f()}return new D(a,e.winningRow,e.winningCol)}var F=function(){function e(t,n){Object(i.a)(this,e),this.board=void 0,this.parent=void 0,this.headDist=0,this.board=t,this.parent=n,null!==this.parent&&(this.headDist=this.parent.headDist+1)}return Object(c.a)(e,[{key:"getChildren",value:function(t){var n,o=new Array,r=Object(E.a)(this.board.getMoves());try{for(r.s();!(n=r.n()).done;){var a=n.value,l=I(this.board,a),s=l.getHash();if(!t.has(s)){t.add(s);var i=new e(l,this);o.push(i)}}}catch(c){r.e(c)}finally{r.f()}return o}}]),e}(),N=function(){function e(t,n,o){Object(i.a)(this,e),this.head=void 0,this.tail=null,this.head=new F(new D(t,n,o),null)}return Object(c.a)(e,[{key:"solve",value:function(){var e=new Set,t=new Array;for(t.push(this.head),e.add(this.head.board.getHash());t.length>0;){var n=t.shift();if(void 0!==n){if(n.board.isSolved())return void(this.tail=n);var o,r=Object(E.a)(n.getChildren(e));try{for(r.s();!(o=r.n()).done;){var a=o.value;t.push(a)}}catch(l){r.e(l)}finally{r.f()}}}}},{key:"getBoards",value:function(){if(null===this.tail)return[];for(var e=new Array(this.tail.headDist),t=this.tail;null!==t;)e[t.headDist-1]=t.board.blocks,t=t.parent;return e}}]),e}(),B=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).state={blocks:[],currState:"cleared",displayText:"Klotski Solver",dragBlock:null,winningRow:3,winningCol:1},o.addBlock=o.addBlock.bind(Object(u.a)(o)),o.clear=o.clear.bind(Object(u.a)(o)),o.default=o.default.bind(Object(u.a)(o)),o.dragBlockInfo=o.dragBlockInfo.bind(Object(u.a)(o)),o.finish=o.finish.bind(Object(u.a)(o)),o.next=o.next.bind(Object(u.a)(o)),o.prev=o.prev.bind(Object(u.a)(o)),o.restart=o.restart.bind(Object(u.a)(o)),o.setWinningPos=o.setWinningPos.bind(Object(u.a)(o)),o.solve=o.solve.bind(Object(u.a)(o)),o}return Object(c.a)(n,[{key:"clear",value:function(){this.setState((function(){return{blocks:[],currState:"cleared",displayText:"Klotski Solver",dragBlock:null,winningRow:3,winningCol:1}}))}},{key:"default",value:function(){var e=[{rowPos:0,colPos:0,numRows:2,numCols:1},{rowPos:0,colPos:1,numRows:2,numCols:2},{rowPos:0,colPos:3,numRows:2,numCols:1},{rowPos:2,colPos:0,numRows:2,numCols:1},{rowPos:2,colPos:1,numRows:1,numCols:2},{rowPos:2,colPos:3,numRows:2,numCols:1},{rowPos:3,colPos:1,numRows:1,numCols:1},{rowPos:3,colPos:2,numRows:1,numCols:1},{rowPos:4,colPos:0,numRows:1,numCols:1},{rowPos:4,colPos:3,numRows:1,numCols:1}];this.setState((function(){return{blocks:e,currState:"default",winningRow:3,winningCol:1}}))}},{key:"addBlock",value:function(e){this.setState((function(){return{blocks:e,currState:"blocksAdded"}}))}},{key:"dragBlockInfo",value:function(e){this.setState((function(){return{dragBlock:{numRows:parseInt(e.split(",")[0]),numCols:parseInt(e.split(",")[1])}}}))}},{key:"restart",value:function(){var e=this.clear;setTimeout((function(){e()}),3e3)}},{key:"next",value:function(){0!==this.state.boards.length&&(this.state.boardIdx===this.state.boards.length-1?(this.setState((function(){return{currState:"finished",displayText:"You Win!"}})),this.restart()):this.setState((function(e){return{blocks:e.boards[e.boardIdx+1],boardIdx:e.boardIdx+1,displayText:"Move "+(e.boardIdx+2).toString()}})))}},{key:"prev",value:function(){0!==this.state.boards.length&&-1!==this.state.boardIdx&&this.setState((function(e){return{blocks:e.boards[e.boardIdx-1],boardIdx:e.boardIdx-1,displayText:e.boardIdx<=0?"Klotski Solver":"Move "+e.boardIdx.toString()}}))}},{key:"finish",value:function(){this.setState((function(){return{currState:"finished"}}));var e=this.next,t=this.state.boards.length,n=this.state.boardIdx,o=setInterval((function(){n<t?(e(),n++):clearInterval(o)}),250)}},{key:"solve",value:function(){try{var e=new N(this.state.blocks,this.state.winningRow,this.state.winningCol);e.solve()}catch(o){return void alert(o)}this.setState((function(){return{currState:"solved"}}));var t=e.getBoards(),n=t.length;0===n?(this.setState((function(){return{displayText:"No Solution Found :("}})),this.restart()):this.setState((function(){return{displayText:"Solution of Length "+n.toString()+" Found!",boards:t,boardIdx:-1}}))}},{key:"setWinningPos",value:function(e){var t=e.currentTarget.id,n=parseInt(t.split(",")[0]),o=parseInt(t.split(",")[1]);n<4&&o<3&&"cleared"===this.state.currState&&this.setState((function(){return{winningRow:n,winningCol:o}}))}},{key:"render",value:function(){return r.a.createElement("div",{id:"content-wrapper"},r.a.createElement("div",{className:"h1 text-center mt-1 mb-0",id:"header"},this.state.displayText),r.a.createElement("div",{className:"row justify-content-center px-0 mx-0"},r.a.createElement("div",{className:"col-3 board"},r.a.createElement(p,{blocks:this.state.blocks,dragBlock:this.state.dragBlock,winningRow:this.state.winningRow,winningCol:this.state.winningCol,onAddBlock:this.addBlock,onWinPosChange:this.setWinningPos}),r.a.createElement(y,{state:this.state.currState,onClear:this.clear,onDefault:this.default,onFinish:this.finish,onNext:this.next,onPrev:this.prev,onSolve:this.solve})),r.a.createElement(R,{show:"cleared"===this.state.currState||"blocksAdded"===this.state.currState,onDragFunc:this.dragBlockInfo})),r.a.createElement("footer",{className:"mt-5 text-center text-secondary"},"Developed by Sam Royall"))}}]),n}(r.a.Component),T=(n(20),function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(s,null),r.a.createElement(B,null))});n(21);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null)),document.getElementById("root"))}],[[9,1,2]]]);
//# sourceMappingURL=main.324456d7.chunk.js.map