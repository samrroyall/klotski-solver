(this["webpackJsonpklotski-solver"]=this["webpackJsonpklotski-solver"]||[]).push([[0],{14:function(e,t,o){},16:function(e,t,o){"use strict";o.r(t);var n,r=o(0),a=o.n(r),s=o(8),l=o.n(s),i=o(3),c=o(4),u=o(1),d=o(6),b=o(5),m=o(2);function h(e){return e===n.Left?n.Right:e===n.Right?n.Left:e===n.Up?n.Down:n.Up}function v(e){for(var t=e.length,o=new Array(t),n=0;n<t;n++)o[t-n-1]=h(e[n]);return o}function f(e){return{rowPos:e.rowPos,colPos:e.colPos,numRows:e.numRows,numCols:e.numCols}}function w(e,t){var o,r=Object(m.a)(t);try{for(r.s();!(o=r.n()).done;){var a=o.value;a===n.Left?e.colPos--:a===n.Right?e.colPos++:a===n.Up?e.rowPos--:e.rowPos++}}catch(s){r.e(s)}finally{r.f()}}!function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Up=2]="Up",e[e.Down=3]="Down"}(n||(n={}));var p=function(){function e(t,o,n){Object(i.a)(this,e),this._cells=[[null,null,null,null],[null,null,null,null],[null,null,null,null],[null,null,null,null],[null,null,null,null]],this.blocks=void 0,this.winningCol=void 0,this.winningRow=void 0,this.winningRow=o,this.winningCol=n,this.blocks=t,this.insertBlocks()}return Object(c.a)(e,[{key:"insertBlocks",value:function(){var e,t=!1,o=0,n=Object(m.a)(this.blocks);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.numRows*r.numCols!==4||t){if(r.numRows*r.numCols===4)throw new Error("There must be exacly one block of size 4")}else t=!0;for(var a=r.rowPos;a<r.rowPos+r.numRows;a++)for(var s=r.colPos;s<r.colPos+r.numCols;s++){if(null!==this._cells[a][s])throw new Error("Invalid block positioning");this._cells[a][s]=r,o++}}}catch(l){n.e(l)}finally{n.f()}if(18!==o)throw new Error("There must be exactly two free spaces");if(!t)throw new Error("There must be exactly one block of size 4")}},{key:"currentDirs",value:function(e){for(var t=new Array,o=!0,r=!0,a=!0,s=!0,l=e.rowPos;l<e.rowPos+e.numRows;l++){var i=e.colPos;o&&(i<1||null!==this._cells[l][i-1])&&(o=!1),i=e.colPos+e.numCols-1,r&&(i>2||null!==this._cells[l][i+1])&&(r=!1)}for(var c=e.colPos;c<e.colPos+e.numCols;c++){var u=e.rowPos;a&&(u<1||null!==this._cells[u-1][c])&&(a=!1),u=e.rowPos+e.numRows-1,s&&(u>3||null!==this._cells[u+1][c])&&(s=!1)}return o&&t.push(n.Left),r&&t.push(n.Right),a&&t.push(n.Up),s&&t.push(n.Down),t}},{key:"makeMove",value:function(e,t){var o,r=e.numRows,a=e.numCols,s=Object(m.a)(t);try{for(s.s();!(o=s.n()).done;){var l=o.value,i=e.rowPos,c=e.colPos;if(w(e,[l]),l===n.Left||l===n.Up)for(var u=i;u<i+r;u++)for(var d=c;d<c+a;d++)l===n.Left?this._cells[u][d-1]=e:this._cells[u-1][d]=e,this._cells[u][d]=null;else for(var b=i+r-1;b>=i;b--)for(var h=c+a-1;h>=c;h--)l===n.Right?this._cells[b][h+1]=e:this._cells[b+1][h]=e,this._cells[b][h]=null}}catch(v){s.e(v)}finally{s.f()}}},{key:"findMoves",value:function(e){var t,o=new Array,n=Object(m.a)(this.currentDirs(e));try{for(n.s();!(t=n.n()).done;){var r=t.value;o.push([r]),this.makeMove(e,[r]);var a,s=Object(m.a)(this.currentDirs(e));try{for(s.s();!(a=s.n()).done;){var l=a.value;if(l!==h(r)){var i=[r,l];o.push(i)}}}catch(c){s.e(c)}finally{s.f()}this.makeMove(e,v([r]))}}catch(c){n.e(c)}finally{n.f()}return o}},{key:"getMoves",value:function(){var e,t=new Array,o=Object(m.a)(this.blocks);try{for(o.s();!(e=o.n()).done;){var n,r=e.value,a=Object(m.a)(this.findMoves(r));try{for(a.s();!(n=a.n()).done;){var s=n.value,l=f(r);t.push({block:l,dirs:s})}}catch(i){a.e(i)}finally{a.f()}}}catch(i){o.e(i)}finally{o.f()}return t}},{key:"getHash",value:function(){for(var e="",t=0;t<5;t++)for(var o=0;o<4;o++){var n=this._cells[t][o];null===n?e+="0":n.numRows*n.numCols===2?e+=1===n.numRows?"2H":"2V":e+=(n.numRows*n.numCols).toString()}return e}},{key:"isSolved",value:function(){var e=this._cells[this.winningRow][this.winningCol];return null!==e&&(e.rowPos===this.winningRow&&e.colPos===this.winningCol&&e.numRows*e.numCols===4)}}]),e}();function g(e,t){var o,n,r,a=new Array,s=Object(m.a)(e.blocks);try{for(s.s();!(o=s.n()).done;){var l=f(o.value);n=l,r=t.block,n.rowPos===r.rowPos&&n.colPos===r.colPos&&n.numRows===r.numRows&&n.numCols===r.numCols&&w(l,t.dirs),a.push(l)}}catch(i){s.e(i)}finally{s.f()}return new p(a,e.winningRow,e.winningCol)}var k=function(){function e(t,o){Object(i.a)(this,e),this.board=void 0,this.parent=void 0,this.headDist=0,this.board=t,this.parent=o,null!==this.parent&&(this.headDist=this.parent.headDist+1)}return Object(c.a)(e,[{key:"getChildren",value:function(t){var o,n=new Array,r=Object(m.a)(this.board.getMoves());try{for(r.s();!(o=r.n()).done;){var a=o.value,s=g(this.board,a),l=s.getHash();if(!t.has(l)){t.add(l);var i=new e(s,this);n.push(i)}}}catch(c){r.e(c)}finally{r.f()}return n}}]),e}(),y=function(){function e(t,o,n){Object(i.a)(this,e),this.head=void 0,this.tail=null,this.head=new k(new p(t,o,n),null)}return Object(c.a)(e,[{key:"solve",value:function(){var e=new Set,t=new Array;for(t.push(this.head),e.add(this.head.board.getHash());t.length>0;){var o=t.shift();if(void 0!==o){if(o.board.isSolved())return void(this.tail=o);var n,r=Object(m.a)(o.getChildren(e));try{for(r.s();!(n=r.n()).done;){var a=n.value;t.push(a)}}catch(s){r.e(s)}finally{r.f()}}}}},{key:"getBoards",value:function(){if(null===this.tail)return[];for(var e=new Array(this.tail.headDist),t=this.tail;null!==t;)e[t.headDist-1]=t.board.blocks,t=t.parent;return e}}]),e}();o(14);function C(e){var t="col-3 boardblock p-0 m-0 bg-primary border border-dark",o="col-3 boardblock p-0 m-0 bg-warning border border-dark",n="col-3 boardblock p-0 m-0 bg-danger border border-dark",r="";return 1===e.size?r="col-3 boardblock p-0 m-0 bg-success border border-dark rounded":2===e.size&&1===e.block.numCols?r=e.currRow===e.block.rowPos?t+" border-bottom-0 rounded-top":t+" border-top-0 rounded-bottom":2===e.size?r=e.currCol===e.block.colPos?o+" border-right-0 rounded-left":o+" border-left-0 rounded-right":4===e.size?r=e.currCol===e.block.colPos&&e.currRow===e.block.rowPos?n+" border-right-0 border-bottom-0 rounded-top-left":e.currCol===e.block.colPos&&e.currRow!==e.block.rowPos?n+" border-right-0 border-top-0 rounded-bottom-left":e.currCol!==e.block.colPos&&e.currRow===e.block.rowPos?n+" border-left-0 border-bottom-0 rounded-top-right":n+" border-left-0 border-top-0 rounded-bottom-right":alert("Invalid board cell properties"),a.a.createElement("div",{className:r,id:e.id,onMouseUp:e.onDropFunc,onMouseDown:e.onClickFunc})}function P(e){function t(t){e.onClickFunc(t)}var o=parseInt(e.id.split(",")[0]),n=parseInt(e.id.split(",")[1]),r=e.block.numRows*e.block.numCols,s=a.a.createElement("div",{className:"col-3 boardcell winningcell p-0 m-0 border",id:e.id,onMouseUp:e.onDropFunc,onMouseDown:t}),l=a.a.createElement("div",{className:"col-3 boardcell p-0 m-0 border",id:e.id,onMouseUp:e.onDropFunc,onMouseDown:t});if(0===r){var i=e.winningRow,c=e.winningCol;return o!==i&&o!==i+1||n!==c&&n!==c+1?l:s}return a.a.createElement(C,{key:e.id,id:e.id,block:e.block,currCol:n,currRow:o,size:r,onDropFunc:e.onDropFunc,onClickFunc:t})}function R(e){var t=e.cells.map((function(t){return a.a.createElement(P,{key:t.id,id:t.id,block:t.val,onClickFunc:e.onClickFunc,onDropFunc:e.onDropFunc,winningRow:e.winningRow,winningCol:e.winningCol})}));return a.a.createElement("div",{className:"row boardrow p-0 m-0"},t)}function E(e){function t(t){if(e.dragBlock){var o=parseInt(t.currentTarget.id.split(",")[0]),n=parseInt(t.currentTarget.id.split(",")[1]),r=o+e.dragBlock.numRows-1,a=n+e.dragBlock.numCols-1;if(r<e.boardRows&&a<e.boardCols){var s={rowPos:o,colPos:n,numRows:e.dragBlock.numRows,numCols:e.dragBlock.numCols};s.numRows*s.numCols===4&&s.rowPos===e.winningRow&&s.colPos===e.winningCol||function(t){for(var o=[],n=t.rowPos,r=t.rowPos+t.numRows-1,a=t.colPos,s=t.colPos+t.numCols-1,l=0;l<e.blocks.length;l++){var i=e.blocks[l],c=i.rowPos,u=i.rowPos+i.numRows-1,d=i.colPos,b=i.colPos+i.numCols-1;c>=n&&c<=r&&d>=a&&d<=s||n>=c&&n<=u&&a>=d&&a<=b||n>=c&&n<=u&&s>=d&&s<=b||c>=n&&c<=r&&b>=a&&b<=s||o.push(i)}o.push(t),e.onAddBlock(o)}(s)}}}var o=function(){for(var t=new Array(5),o=0;o<e.boardRows;o++){for(var n={id:o,row:new Array(4)},r=0;r<e.boardCols;r++){var a={id:o.toString()+","+r.toString(),val:{numRows:0,numCols:0,rowPos:o,colPos:r}};n.row[r]=a}t[o]=n}for(var s=0;s<e.blocks.length;s++)for(var l=e.blocks[s],i=l.colPos+l.numCols-1,c=l.rowPos+l.numRows-1,u=l.rowPos;u<=c;u++)for(var d=l.colPos;d<=i;d++)t[u].row[d].val=l;return t}().map((function(o){return a.a.createElement(R,{key:o.id,cells:o.row,onClickFunc:e.dragBlock?t:e.moveWinPos,onDropFunc:t,winningRow:e.winningRow,winningCol:e.winningCol})}));return a.a.createElement("div",{className:"p-0 mt-4 border",id:"board"},o)}var x=function(e){Object(d.a)(o,e);var t=Object(b.a)(o);function o(e){var n;return Object(i.a)(this,o),(n=t.call(this,e)).state={rel:null,pos:{left:0,top:0}},n.click=n.click.bind(Object(u.a)(n)),n.move=n.move.bind(Object(u.a)(n)),n.drop=n.drop.bind(Object(u.a)(n)),n}return Object(c.a)(o,[{key:"click",value:function(e){if(0===e.button){var t=e.currentTarget.getBoundingClientRect();this.setState((function(e){return{rel:{left:t.left,top:t.top}}})),document.addEventListener("mousemove",this.move),document.addEventListener("mouseup",this.drop),this.props.onDragFunc(e.currentTarget.id),e.stopPropagation(),e.preventDefault()}}},{key:"move",value:function(e){var t=this,o=e.pageX,n=e.pageY;this.setState((function(e){return{pos:{left:o-t.state.rel.left,top:n-t.state.rel.top}}})),e.stopPropagation(),e.preventDefault()}},{key:"drop",value:function(e){this.setState((function(e){return{rel:null,pos:{left:0,top:0}}})),document.removeEventListener("mousemove",this.move),document.removeEventListener("mouseup",this.drop),e.stopPropagation(),e.preventDefault()}},{key:"render",value:function(){var e={position:"relative",left:this.state.pos.left+"px",top:this.state.pos.top+"px"},t="";return 4===this.props.size?t="draggable-fourblock draggable m-2 p-0 bg-danger  border border-dark rounded":2===this.props.size&&1===this.props.block.numCols?t="draggable-twoblockV draggable m-2 p-0 bg-primary border border-dark rounded":2===this.props.size?t="draggable-twoblockH draggable m-2 p-0 bg-warning border border-dark rounded":1===this.props.size?t="draggable-oneblock  draggable m-2 p-0 bg-success border border-dark rounded":alert("Invalid draggable block properties"),a.a.createElement("div",{className:t,id:this.props.id,style:e,onMouseDown:this.click})}}]),o}(a.a.Component);function S(e){return e.show?a.a.createElement("div",{className:"col-12 mt-2"},a.a.createElement("div",{className:"row justify-content-center"},a.a.createElement(x,{size:4,id:"2,2",onDragFunc:e.onDragFunc}),a.a.createElement(x,{size:2,id:"2,1",block:{numRows:2,numCols:1},onDragFunc:e.onDragFunc}),a.a.createElement(x,{size:2,id:"1,2",block:{numRows:1,numCols:2},onDragFunc:e.onDragFunc}),a.a.createElement(x,{size:1,id:"1,1",onDragFunc:e.onDragFunc}))):a.a.createElement("span",null)}function D(e){var t=a.a.createElement("button",{className:"btn btn-sm btn-danger mr-2",onClick:e.onClear},"Clear"),o=a.a.createElement("button",{className:"btn btn-sm btn-warning mx-1",onClick:e.onDefault},"Default"),n=a.a.createElement("button",{className:"btn btn-sm btn-success ml-2",onClick:e.onFinish},"Finish"),r=a.a.createElement("button",{className:"btn btn-sm btn-warning mx-2",onClick:e.onNext},"Next"),s=a.a.createElement("button",{className:"btn btn-sm btn-danger mr-2",onClick:e.onPrev,id:"prev-btn"},"Prev"),l=a.a.createElement("button",{className:"btn btn-sm btn-primary ml-2",onClick:e.onSolve},"Solve!");return"finished"===e.state?a.a.createElement("span",null):"solved"===e.state?a.a.createElement("div",{className:"text-center mt-2"},s,r,n):"blocksAdded"===e.state?a.a.createElement("div",{className:"text-center mt-2"},t,l):"cleared"===e.state?a.a.createElement("div",{className:"text-center mt-2"},o,l):"default"===e.state?a.a.createElement("div",{className:"text-center mt-2"},t,l):a.a.createElement("span",null)}var j=function(e){Object(d.a)(o,e);var t=Object(b.a)(o);function o(e){var n;return Object(i.a)(this,o),(n=t.call(this,e)).state={blocks:[],currState:"cleared",displayText:"Klotski Solver",dragBlock:null,boardRows:5,boardCols:4,winningRow:3,winningCol:1},n.blocksAdded=n.blocksAdded.bind(Object(u.a)(n)),n.clear=n.clear.bind(Object(u.a)(n)),n.default=n.default.bind(Object(u.a)(n)),n.dragBlockInfo=n.dragBlockInfo.bind(Object(u.a)(n)),n.finish=n.finish.bind(Object(u.a)(n)),n.next=n.next.bind(Object(u.a)(n)),n.prev=n.prev.bind(Object(u.a)(n)),n.restart=n.restart.bind(Object(u.a)(n)),n.setWinningPos=n.setWinningPos.bind(Object(u.a)(n)),n.solve=n.solve.bind(Object(u.a)(n)),n}return Object(c.a)(o,[{key:"clear",value:function(){this.setState((function(e){return{blocks:[],currState:"cleared",displayText:"Klotski Solver",dragBlock:null,boardRows:5,boardCols:4,winningRow:3,winningCol:1}}))}},{key:"default",value:function(){var e=[{rowPos:0,colPos:0,numRows:2,numCols:1},{rowPos:0,colPos:1,numRows:2,numCols:2},{rowPos:0,colPos:3,numRows:2,numCols:1},{rowPos:2,colPos:0,numRows:2,numCols:1},{rowPos:2,colPos:1,numRows:1,numCols:2},{rowPos:2,colPos:3,numRows:2,numCols:1},{rowPos:3,colPos:1,numRows:1,numCols:1},{rowPos:3,colPos:2,numRows:1,numCols:1},{rowPos:4,colPos:0,numRows:1,numCols:1},{rowPos:4,colPos:3,numRows:1,numCols:1}];this.setState((function(t){return{blocks:e,currState:"default",boardRows:5,boardCols:4,winningRow:3,winningCol:1}}))}},{key:"blocksAdded",value:function(e){this.setState((function(t){return{blocks:e,currState:"blocksAdded"}}))}},{key:"dragBlockInfo",value:function(e){this.setState((function(t){return{dragBlock:{numRows:parseInt(e.split(",")[0]),numCols:parseInt(e.split(",")[1])}}}))}},{key:"restart",value:function(){var e=this.clear;setTimeout((function(){e()}),3e3)}},{key:"next",value:function(){var e=this;0!==this.state.boards.length&&(this.state.boardIdx===this.state.boards.length-1?(this.setState((function(e){return{currState:"finished",displayText:"You Win!"}})),this.restart()):this.setState((function(t){return{blocks:e.state.boards[e.state.boardIdx+1],boardIdx:e.state.boardIdx+1,displayText:"Move "+(e.state.boardIdx+2).toString()}})))}},{key:"prev",value:function(){var e=this;0!==this.state.boards.length&&-1!==this.state.boardIdx&&this.setState((function(t){return{blocks:e.state.boards[e.state.boardIdx-1],boardIdx:e.state.boardIdx-1,displayText:e.state.boardIdx<=0?"Klotski Solver":"Move "+e.state.boardIdx.toString()}}))}},{key:"finish",value:function(){this.setState((function(e){return{currState:"finished"}}));var e=this.state.boardIdx,t=this.state.boards.length,o=this.next,n=setInterval((function(){e<t?(o(),e++):clearInterval(n)}),250)}},{key:"solve",value:function(){try{var e=new y(this.state.blocks,this.state.winningRow,this.state.winningCol);e.solve()}catch(n){return void alert(n)}this.setState((function(e){return{currState:"solved"}}));var t=e.getBoards(),o=t.length;0===o?(this.setState((function(e){return{displayText:"No Solution Found :("}})),this.restart()):this.setState((function(e){return{displayText:"Solution of Length "+o.toString()+" Found!",boards:t,boardIdx:-1}}))}},{key:"setWinningPos",value:function(e){var t=e.currentTarget.id,o=parseInt(t.split(",")[0]),n=parseInt(t.split(",")[1]);o<this.state.boardRows-1&&n<this.state.boardCols-1&&"cleared"===this.state.currState&&this.setState((function(e){return{winningRow:o,winningCol:n}}))}},{key:"render",value:function(){return a.a.createElement("div",{id:"content-wrapper"},a.a.createElement("div",{className:"h1 text-center mt-1 mb-0",id:"header"},this.state.displayText),a.a.createElement("div",{className:"row justify-content-center px-0 mx-0"},a.a.createElement("div",{className:"col-3 board"},a.a.createElement(E,{blocks:this.state.blocks,boardRows:this.state.boardRows,boardCols:this.state.boardCols,dragBlock:this.state.dragBlock,onAddBlock:this.blocksAdded,moveWinPos:this.setWinningPos,winningRow:this.state.winningRow,winningCol:this.state.winningCol}),a.a.createElement(D,{state:this.state.currState,onClear:this.clear,onDefault:this.default,onFinish:this.finish,onNext:this.next,onPrev:this.prev,onSolve:this.solve})),a.a.createElement(S,{show:"cleared"===this.state.currState||"blocksAdded"===this.state.currState,onDragFunc:this.dragBlockInfo})),a.a.createElement("div",{className:"mt-5 text-center text-secondary",id:"footer"},"Developed by Sam Royall"))}}]),o}(a.a.Component);function O(){return a.a.createElement("div",null,a.a.createElement("div",{id:"overlay"}),a.a.createElement("div",{className:"alert alert-danger alert-dismissible fade show",id:"instructions-alert",role:"alert"},a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("button",{type:"button",className:"close alert-button","data-dismiss":"alert","aria-label":"close",onClick:function(){document.getElementById("overlay").classList.add("hide")}},a.a.createElement("span",{"aria-hidden":"true"},"\xd7")),a.a.createElement("div",{className:"h4"},"Welcome to Klotski Solver!"),a.a.createElement("hr",null),"Klotski boards are comprised of a number of blocks and have exactly ",a.a.createElement("strong",null,"two "),"empty spaces. Exactly ",a.a.createElement("strong",null,"one")," of the placed blocks must be a red block. To win, you must move this red block to the winning position in as few moves as possible.",a.a.createElement("hr",null),"1. Click on a board cell to set your winning position (the pink area).",a.a.createElement("br",null),a.a.createElement("br",null),"2. Place blocks on the board by dragging-and-dropping (desktop only) or clicking-to-select and clicking-to-place.",a.a.createElement("br",null),a.a.createElement("br",null),"3. Click ",a.a.createElement("i",null,"Solve")," and watch our super cool algorithm find an optimal solution to your board."))}var I=function(){return a.a.createElement("div",null,a.a.createElement(O,null),a.a.createElement(j,null))};o(15);l.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(I,null)),document.getElementById("root"))},9:function(e,t,o){e.exports=o(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.3983eb73.chunk.js.map