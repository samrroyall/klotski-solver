(this["webpackJsonpklotski-solver"]=this["webpackJsonpklotski-solver"]||[]).push([[0],{12:function(e,t,o){e.exports=o(17)},17:function(e,t,o){"use strict";o.r(t);var n,r=o(0),s=o.n(r),a=o(10),l=o.n(a),i=o(3),c=o(4),u=o(1),d=o(8),h=o(7),b=o(11),m=o(2);function v(e){return e===n.Left?n.Right:e===n.Right?n.Left:e===n.Up?n.Down:n.Up}function f(e){for(var t=e.length,o=new Array(t),n=0;n<t;n++)o[t-n-1]=v(e[n]);return o}function p(e){return{rowPos:e.rowPos,colPos:e.colPos,numRows:e.numRows,numCols:e.numCols}}function k(e,t){var o,r=Object(m.a)(t);try{for(r.s();!(o=r.n()).done;){var s=o.value;s===n.Left?e.colPos--:s===n.Right?e.colPos++:s===n.Up?e.rowPos--:e.rowPos++}}catch(a){r.e(a)}finally{r.f()}}!function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Up=2]="Up",e[e.Down=3]="Down"}(n||(n={}));var w=function(){function e(t){if(Object(i.a)(this,e),this._cells=[[null,null,null,null],[null,null,null,null],[null,null,null,null],[null,null,null,null],[null,null,null,null]],this.blocks=void 0,this.moves=void 0,this.hash=void 0,this.solved=void 0,t.length<10)throw new Error("At least 10 blocks must be placed!");this.blocks=t,this.insertBlocks(),this.hash=this.setHash(),this.moves=this.setMoves(),this.solved=this.isSolved()}return Object(c.a)(e,[{key:"insertBlocks",value:function(){var e,t=!1,o=Object(m.a)(this.blocks);try{for(o.s();!(e=o.n()).done;){var n=e.value;if(n.numRows*n.numCols!==4||t){if(n.numRows*n.numCols===4)throw new Error("Only one block of size 4 may be placed.")}else t=!0;for(var r=n.rowPos;r<n.rowPos+n.numRows;r++)for(var s=n.colPos;s<n.colPos+n.numCols;s++){if(null!==this._cells[r][s])throw new Error("Invalid block positioning");this._cells[r][s]=n}}}catch(a){o.e(a)}finally{o.f()}if(!t)throw new Error("One block of size 4 must be placed.")}},{key:"setHash",value:function(){for(var e="",t=0;t<5;t++)for(var o=0;o<4;o++){var n=this._cells[t][o];null===n?e+="0":n.numRows*n.numCols===2?e+=1===n.numRows?"2H":"2V":e+=(n.numRows*n.numCols).toString()}return e}},{key:"currentDirs",value:function(e){for(var t=new Array,o=!0,r=!0,s=!0,a=!0,l=e.rowPos;l<e.rowPos+e.numRows;l++){var i=e.colPos;o&&(i<1||null!==this._cells[l][i-1])&&(o=!1),i=e.colPos+e.numCols-1,r&&(i>2||null!==this._cells[l][i+1])&&(r=!1)}for(var c=e.colPos;c<e.colPos+e.numCols;c++){var u=e.rowPos;s&&(u<1||null!==this._cells[u-1][c])&&(s=!1),u=e.rowPos+e.numRows-1,a&&(u>3||null!==this._cells[u+1][c])&&(a=!1)}return o&&t.push(n.Left),r&&t.push(n.Right),s&&t.push(n.Up),a&&t.push(n.Down),t}},{key:"makeMove",value:function(e,t){var o,r=e.numRows,s=e.numCols,a=Object(m.a)(t);try{for(a.s();!(o=a.n()).done;){var l=o.value,i=e.rowPos,c=e.colPos;if(k(e,[l]),l===n.Left||l===n.Up)for(var u=i;u<i+r;u++)for(var d=c;d<c+s;d++)l===n.Left?this._cells[u][d-1]=e:this._cells[u-1][d]=e,this._cells[u][d]=null;else for(var h=i+r-1;h>=i;h--)for(var b=c+s-1;b>=c;b--)l===n.Right?this._cells[h][b+1]=e:this._cells[h+1][b]=e,this._cells[h][b]=null}}catch(v){a.e(v)}finally{a.f()}}},{key:"findMoves",value:function(e){var t,o=new Array,n=new Array,r=Object(m.a)(this.currentDirs(e));try{for(r.s();!(t=r.n()).done;){var s=t.value;n.push([s])}}catch(d){r.e(d)}finally{r.f()}for(;n.length>0;){var a=n.pop();if(void 0!==a){o.push(a),this.makeMove(e,a);var l,i=Object(m.a)(this.currentDirs(e));try{for(i.s();!(l=i.n()).done;){var c=l.value;if(c!==v(a[a.length-1])){var u=Object(b.a)(a);u.push(c),n.push(u)}}}catch(d){i.e(d)}finally{i.f()}this.makeMove(e,f(a))}}return o}},{key:"setMoves",value:function(){var e,t=new Array,o=Object(m.a)(this.blocks);try{for(o.s();!(e=o.n()).done;){var n,r=e.value,s=Object(m.a)(this.findMoves(r));try{for(s.s();!(n=s.n()).done;){var a=n.value,l=p(r);t.push({block:l,dirs:a})}}catch(i){s.e(i)}finally{s.f()}}}catch(i){o.e(i)}finally{o.f()}return t}},{key:"isSolved",value:function(){var e=this._cells[3][1];return null!==e&&(3===e.rowPos&&1===e.colPos&&e.numRows*e.numCols===4)}}]),e}();function g(e,t){var o,n,r,s=new Array,a=Object(m.a)(e.blocks);try{for(a.s();!(o=a.n()).done;){var l=o.value;s.push(p(l))}}catch(d){a.e(d)}finally{a.f()}for(var i=0,c=s;i<c.length;i++){var u=c[i];n=u,r=t.block,n.rowPos===r.rowPos&&n.colPos===r.colPos&&n.numRows===r.numRows&&n.numCols===r.numCols&&k(u,t.dirs)}return new w(s)}var y=function(){function e(t,o){Object(i.a)(this,e),this.board=void 0,this.parent=void 0,this.headDist=0,this.board=t,this.parent=o,null!==this.parent&&(this.headDist=this.parent.headDist+1)}return Object(c.a)(e,[{key:"getChildren",value:function(t){var o,n=new Array,r=Object(m.a)(this.board.moves);try{for(r.s();!(o=r.n()).done;){var s=o.value,a=g(this.board,s);if(!t.has(a.hash)){var l=new e(a,this);n.push(l)}}}catch(i){r.e(i)}finally{r.f()}return n}}]),e}(),P=function(){function e(t){Object(i.a)(this,e),this.head=void 0,this.tail=null,this.head=new y(new w(t),null)}return Object(c.a)(e,[{key:"solve",value:function(){var e=new Set,t=new Array;for(t.push(this.head),e.add(this.head.board.hash);t.length>0;){var o=t.shift();if(void 0!==o){if(o.board.solved)return this.tail=o,void console.log("Solution found of length: "+o.headDist);var n,r=Object(m.a)(o.getChildren(e));try{for(r.s();!(n=r.n()).done;){var s=n.value;e.add(s.board.hash),t.push(s)}}catch(a){r.e(a)}finally{r.f()}}}}},{key:"getBoards",value:function(){if(null===this.tail)return[];for(var e=new Array(this.tail.headDist),t=this.tail;null!==t;)e[t.headDist-1]=t.board.blocks,t=t.parent;return e}}]),e}();function C(e){if(4===e.size)return s.a.createElement("div",{className:"col-6 fourblock m-0 bg-danger border border-dark rounded"});if(2===e.size){if(1===e.block.numCols)return s.a.createElement("div",{className:"col-3 twoblockV m-0 bg-primary border border-dark rounded"});if(2===e.block.numCols)return s.a.createElement("div",{className:"col-6 twoblockH m-0 bg-warning border border-dark rounded"})}else if(1===e.size)return s.a.createElement("div",{className:"col-3 oneblock m-0 bg-success border border-dark rounded"})}function E(e){if(null==e.block)return s.a.createElement("span",null);if(e.block.hasOwnProperty("colPos")&&e.block.hasOwnProperty("rowPos")){var t=e.block.hasOwnProperty("numCols")?e.block.numRows*e.block.numCols:e.block.numRows*e.block.numRows;if(0===t){var o=parseInt(e.id.split(",")[0]),n=parseInt(e.id.split(",")[1]);return 3!==o&&4!==o||1!==n&&2!==n?s.a.createElement("div",{className:"col-3 boardcell m-0 border",id:e.id,onMouseUp:e.onDropFunc}):s.a.createElement("div",{className:"col-3 boardcell winningcell m-0 border",id:e.id,onMouseUp:e.onDropFunc})}return s.a.createElement(C,{key:e.id,size:t,block:e.block})}return s.a.createElement("div",{className:"col-3 m-0"})}function x(e){var t=e.cells.map((function(t){return s.a.createElement(E,{key:t.id,id:t.id,block:t.val,onDropFunc:e.onDropFunc})}));return s.a.createElement("div",{className:"row boardrow p-0 m-0"},t)}var D=function(e){Object(d.a)(o,e);var t=Object(h.a)(o);function o(e){var n;return Object(i.a)(this,o),(n=t.call(this,e)).state={blocks:n.props.blocks,blocksAdded:!1},n.onDrop=n.onDrop.bind(Object(u.a)(n)),n}return Object(c.a)(o,[{key:"onDrop",value:function(e){if(this.props.dragBlock){var t=this.state.blocks;t.push({rowPos:parseInt(e.currentTarget.id.split(",")[0]),colPos:parseInt(e.currentTarget.id.split(",")[1]),numRows:this.props.dragBlock.numRows,numCols:this.props.dragBlock.numCols}),this.setState((function(e){return{blocksAdded:!0,blocks:t}})),this.props.onAddBlock(this.state.blocks)}}},{key:"getBlocks",value:function(e){e!==this.state.blocks&&this.setState((function(t){return{blocks:e}}));for(var t={numRows:0,numCols:0},o=new Array(5),n=0;n<5;n++){for(var r={id:n,row:new Array(4)},s=0;s<4;s++){var a={id:n.toString()+","+s.toString(),val:{numRows:0,numCols:0,rowPos:n,colPos:s}};r.row[s]=a}o[n]=r}for(var l=0;l<e.length;l++)for(var i=e[l],c=i.rowPos;c<i.rowPos+i.numRows;c++)for(var u=i.colPos;u<i.colPos+i.numCols;u++)c===i.rowPos&&u===i.colPos?o[c].row[u].val=i:c===i.rowPos?o[c].row[u].val=null:o[c].row[u].val=t;return o}},{key:"render",value:function(){var e=this,t=this.getBlocks(this.props.blocks).map((function(t){return s.a.createElement(x,{key:t.id,cells:t.row,onDropFunc:e.onDrop})}));return s.a.createElement("div",{className:"p-0 mt-4 border",id:"board"},t)}}]),o}(s.a.Component),O=function(e){Object(d.a)(o,e);var t=Object(h.a)(o);function o(e){var n;return Object(i.a)(this,o),(n=t.call(this,e)).state={rel:null,pos:{left:0,top:0}},n.drag=n.drag.bind(Object(u.a)(n)),n.move=n.move.bind(Object(u.a)(n)),n.drop=n.drop.bind(Object(u.a)(n)),n}return Object(c.a)(o,[{key:"drag",value:function(e){if(0===e.button){var t=e.currentTarget.getBoundingClientRect();this.setState((function(e){return{rel:{left:t.left,top:t.top}}})),document.addEventListener("mousemove",this.move),document.addEventListener("mouseup",this.drop),this.props.onDragFunc(e.currentTarget.id),e.stopPropagation(),e.preventDefault()}}},{key:"move",value:function(e){var t=this,o=e.pageX,n=e.pageY;this.setState((function(e){return{pos:{left:o-t.state.rel.left,top:n-t.state.rel.top}}})),e.stopPropagation(),e.preventDefault()}},{key:"drop",value:function(e){this.setState((function(e){return{rel:null,pos:{left:0,top:0}}})),document.removeEventListener("mousemove",this.move),document.removeEventListener("mouseup",this.drop),e.stopPropagation(),e.preventDefault()}},{key:"render",value:function(){if(4===this.props.size)return s.a.createElement("div",{className:"draggable-fourblock m-0 bg-danger border border-dark rounded draggable",id:this.props.id,style:{position:"relative",left:this.state.pos.left+"px",top:this.state.pos.top+"px"},onMouseDown:this.drag});if(2===this.props.size){if(1===this.props.block.numCols)return s.a.createElement("div",{className:"draggable-twoblockV m-0 bg-primary border border-dark rounded draggable",id:this.props.id,style:{position:"relative",left:this.state.pos.left+"px",top:this.state.pos.top+"px"},onMouseDown:this.drag});if(2===this.props.block.numCols)return s.a.createElement("div",{className:"draggable-twoblockH m-0 bg-warning border border-dark rounded draggable",id:this.props.id,style:{position:"relative",left:this.state.pos.left+"px",top:this.state.pos.top+"px"},onMouseDown:this.drag})}else if(1===this.props.size)return s.a.createElement("div",{className:"draggable-oneblock m-0 bg-success border border-dark rounded draggable",id:this.props.id,style:{position:"relative",left:this.state.pos.left+"px",top:this.state.pos.top+"px"},onMouseDown:this.drag})}}]),o}(s.a.Component);function j(e){return e.show?s.a.createElement("div",{className:"col-10 col-xl-4 mt-5"},s.a.createElement("div",{className:"row justify-content-center"},s.a.createElement(O,{size:4,id:"2,2",onDragFunc:e.onDragFunc}),s.a.createElement("div",{className:"mx-2"}),s.a.createElement(O,{size:2,id:"2,1",block:{numRows:2,numCols:1},onDragFunc:e.onDragFunc})),s.a.createElement("div",{className:"row justify-content-center mt-3"},s.a.createElement(O,{size:1,id:"1,1",onDragFunc:e.onDragFunc}),s.a.createElement("div",{className:"mx-2"}),s.a.createElement(O,{size:2,id:"1,2",block:{numRows:1,numCols:2},onDragFunc:e.onDragFunc}))):s.a.createElement("span",null)}function R(e){var t=s.a.createElement("button",{className:"btn btn-danger mr-2",onClick:e.onClear},"Clear"),o=s.a.createElement("button",{className:"btn btn-danger mr-2",onClick:e.onDoubleClear},"Clear"),n=s.a.createElement("button",{className:"btn btn-warning mx-1",onClick:e.onDefault},"Default"),r=s.a.createElement("button",{className:"btn btn-primary ml-2",onClick:e.onSolve},"Solve!"),a=s.a.createElement("button",{className:"btn btn-danger mr-2",onClick:e.onPrev,id:"prev-btn"},"Prev"),l=s.a.createElement("button",{className:"btn btn-warning mx-2",onClick:e.onNext},"Next"),i=s.a.createElement("button",{className:"btn btn-success ml-2",onClick:e.onFinish},"Finish");return e.solved?s.a.createElement("div",{className:"text-center mt-3"},a,l,i):e.blocksAdded?s.a.createElement("div",{className:"text-center mt-3"},o,r):e.cleared?s.a.createElement("div",{className:"text-center mt-3"},n,r):e.finished?s.a.createElement("span",null):s.a.createElement("div",{className:"text-center mt-3"},t,r)}var N=function(e){Object(d.a)(o,e);var t=Object(h.a)(o);function o(e){var n;return Object(i.a)(this,o),(n=t.call(this,e)).state={blocks:[],blocksAdded:!1,cleared:!0,displayText:"Klotski Solver",default:!1,solved:!1,finished:!1,dragBlock:null},n.blocksAdded=n.blocksAdded.bind(Object(u.a)(n)),n.clear=n.clear.bind(Object(u.a)(n)),n.doubleClear=n.doubleClear.bind(Object(u.a)(n)),n.default=n.default.bind(Object(u.a)(n)),n.solve=n.solve.bind(Object(u.a)(n)),n.next=n.next.bind(Object(u.a)(n)),n.prev=n.prev.bind(Object(u.a)(n)),n.finish=n.finish.bind(Object(u.a)(n)),n.dragBlockInfo=n.dragBlockInfo.bind(Object(u.a)(n)),n.clearDragBlock=n.clearDragBlock.bind(Object(u.a)(n)),n}return Object(c.a)(o,[{key:"blocksAdded",value:function(e){this.setState((function(t){return{blocks:e,blocksAdded:!0,cleared:!1,default:!1}}))}},{key:"clear",value:function(){this.setState((function(e){return{blocks:[],blocksAdded:!1,cleared:!0,default:!1}}))}},{key:"doubleClear",value:function(){this.clear()}},{key:"solve",value:function(){try{var e=new P(this.state.blocks);e.solve();var t=e.getBoards(),o=t.length,n=o>0?"Solution of Length "+o.toString()+" Found!":"No Solution Found :(";this.setState((function(e){return{blocksAdded:!1,cleared:!1,default:!1,displayText:n,boards:t,boardIdx:-1,solved:!0}}))}catch(r){alert(r)}}},{key:"next",value:function(){var e=this;return this.state.boardIdx===this.state.boards.length-1?(this.setState((function(e){return{displayText:"You Win!"}})),!0):(this.setState((function(t){return{blocks:e.state.boards[e.state.boardIdx+1],boardIdx:e.state.boardIdx+1,displayText:"Move "+(e.state.boardIdx+2).toString()}})),!1)}},{key:"prev",value:function(){var e=this;-1!==this.state.boardIdx&&this.setState((function(t){return{blocks:e.state.boards[e.state.boardIdx-1],boardIdx:e.state.boardIdx-1,displayText:e.state.boardIdx<=0?"Klotski Solver":"Move "+e.state.boardIdx.toString()}}))}},{key:"finish",value:function(){this.setState((function(e){return{solved:!1,finished:!0}}));var e=this.state.boardIdx,t=this.state.boards.length,o=this.next,n=setInterval((function(){e<t?(o(),e++):clearInterval(n)}),500)}},{key:"default",value:function(){var e=[{rowPos:0,colPos:0,numRows:2,numCols:1},{rowPos:0,colPos:1,numRows:2,numCols:2},{rowPos:0,colPos:3,numRows:2,numCols:1},{rowPos:2,colPos:0,numRows:2,numCols:1},{rowPos:2,colPos:1,numRows:1,numCols:2},{rowPos:2,colPos:3,numRows:2,numCols:1},{rowPos:3,colPos:1,numRows:1,numCols:1},{rowPos:3,colPos:2,numRows:1,numCols:1},{rowPos:4,colPos:0,numRows:1,numCols:1},{rowPos:4,colPos:3,numRows:1,numCols:1}];this.setState((function(t){return{blocks:e,blocksAdded:!1,cleared:!1,default:!0}}))}},{key:"dragBlockInfo",value:function(e){this.setState((function(t){return{dragBlock:{numRows:parseInt(e.split(",")[0]),numCols:parseInt(e.split(",")[1])}}}))}},{key:"clearDragBlock",value:function(e){this.setState((function(e){return{dragBlock:null}}))}},{key:"render",value:function(){return s.a.createElement("div",{id:"content-wrapper"},s.a.createElement("div",{className:"h1 text-center mt-1 mb-0",id:"header"},this.state.displayText),s.a.createElement("div",{className:"row justify-content-center px-0 mx-0",onMouseDown:this.clearDragBlock},s.a.createElement("div",{className:"col-4 board"},s.a.createElement(D,{blocks:this.state.blocks,dragBlock:this.state.dragBlock,onAddBlock:this.blocksAdded}),s.a.createElement(R,{blocksAdded:this.state.blocksAdded,cleared:this.state.cleared,finished:this.state.finished,solved:this.state.solved,onClear:this.clear,onDoubleClear:this.doubleClear,onDefault:this.default,onFinish:this.finish,onNext:this.next,onPrev:this.prev,onSolve:this.solve})),s.a.createElement(j,{show:this.state.cleared||this.state.blocksAdded,onDragFunc:this.dragBlockInfo})),s.a.createElement("div",{className:"text-center text-secondary",id:"footer"},"Developed by Sam Royall"))}}]),o}(s.a.Component);var S=function(){return s.a.createElement(N,null)};l.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(S,null)),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.9a9bc0ae.chunk.js.map